<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>Vision Apps User Guide: ETHFW Demos</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vision Apps User Guide
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ETHFW_DEMOS.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ETHFW Demos </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Ethernet Firmware is integrated part of vision_apps and enabled by default. This stack is TI RTOS based application for configuration of Ethernet switch and is expected to be hosted on Cortex R5F in Main Domain.</p>
<div class="image">
<img src="ethfw_demo_setup.png" alt="ethfw_demo_setup.png"/>
</div>
<p>The switch software uses PDK Enet and other drivers for respective IP configuration. The software stack contains remote configuration server, resource management library, switch resident protocols, proxy layers to handle local and remote API calls and demonstration applications (EthFw Demos).</p>
<p>Below are some top-level features demonstarted in EthFw:</p><ul>
<li>Basic L2 switching</li>
<li>Send/receive packets over TCP/UDP</li>
<li>TCP iperf performance testing</li>
<li>Support for remote cores (Linux, QNX)</li>
<li>Time-synchronisation using gPTP</li>
</ul>
<h1><a class="anchor" id="autotoc_md182"></a>
Hardware Setup</h1>
<p>The below are required to run EthFw</p><ul>
<li>J7ES/J7AHP EVM</li>
<li>GESI daughter card (needed for J7ES)</li>
<li>QPENET (i.e. QSGMII) daughter card (needed for J7ES/J7AHP)</li>
<li>Two PCs running Ubuntu connected to the GESI board (for J7ES) in order to demonstrate the L2 switching capabilities as well as to generate and monitor Ethernet traffic</li>
<li>A pair of network cables, connected as shown in the setup diagram above (for J7ES)<ul>
<li>One cable connected to port8 (switch port) on the GESI card and other end connected to Linux machine (i.e. the DHCP server)</li>
<li>Second cable connected to port3 (switch port) on the GESI card and other end connected to client machine</li>
</ul>
</li>
<li>UART cable connected to main UART port on the J7ES EVM</li>
<li>12V power supply for the EVM</li>
<li>SD card</li>
</ul>
<h1><a class="anchor" id="autotoc_md183"></a>
Software Setup</h1>
<ul>
<li>Install and run a DHCP server on PC1 Ubuntu 22.04 machine by following the instructions here <a href="https://help.ubuntu.com/community/isc-dhcp-server">https://help.ubuntu.com/community/isc-dhcp-server</a> This machine will provide IP to R5F (Main MCU2_0), A72 and any client connected via switch port of GESI/QSGMII card.</li>
<li>iperf network performance tool is required on either PC1 or PC2. Install iperf in the selected Ubuntu PC(s): <div class="fragment"><div class="line">sudo apt-get install iperf</div></div><!-- fragment --></li>
<li>packETH tool is required only in PC1. Install packETH generator tool on Linux PC. The Ubuntu installation can be found in their website: <a href="https://packeth.sourceforge.net/packeth/Installation.html">https://packeth.sourceforge.net/packeth/Installation.html</a> The packEth configurations used in this demo are included in the Ethernet Firmware package at &lt;ETHFW_PATH&gt;/docs/packeth_configurations/ <blockquote class="doxtable">
<p><b>Note:</b> Please check licensing information and terms of usage of packETH tool and make sure it adheres to your organization's policy before using and configuring it. </p>
</blockquote>
</li>
<li>Wireshark packet analyser tool is required in both PC1 and PC2. Refer to the Wireshark installation instructions on Ubuntu in this website: <a href="https://linuxhint.com/install_wireshark_ubuntu/">https://linuxhint.com/install_wireshark_ubuntu/</a></li>
<li>For testing gPTP time synchronisation we need to install ptp4l tool on PC2 which is connected to MAC port by following the instructions here <a href="https://tsn.readthedocs.io/timesync.html,">https://tsn.readthedocs.io/timesync.html,</a> we can configure PC2 to run either as master or slave by editing the config file. <blockquote class="doxtable">
<p><b>Note:</b> gPTP time synchronisation is enabled in MAC port 3 in both J7ES and J7AHP. Please connect to MAC port 3 to avoid missing timestamps warnings. </p>
</blockquote>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md184"></a>
Running the demo (Linux + RTOS) or (QNX + RTOS)</h1>
<ul>
<li>Build the application and related libraries as mentioned in <a class="el" href="BUILD_INSTRUCTIONS.html">Build Instructions</a></li>
<li>After flashing binaries on SD card using <code>make linux_fs_install_sd</code> insert in the SD card slot in the EVM</li>
<li>Open UART client like minicom on /dev/ttyUSB0 (instance 0) where Linux logs usually appear.</li>
<li>Power on the EVM and let the OS come up.</li>
<li>Login with root and navigate to /opt/vision_apps on linux and /ti_fs/vision_apps on QNX, run the ./vision_apps_init.sh script.</li>
<li>Upon sucessfull completion you should see EthFw initialization logs, gPTP initialization logs and version as given below.</li>
</ul>
<div class="fragment"><div class="line">j7-evm login: root</div><div class="line">Last login: Mon Nov 29 14:43:33 UTC 2021</div><div class="line">root@j7-evm:~# source /opt/vision_apps/vision_apps_init.sh</div><div class="line">...</div><div class="line">...</div><div class="line">[MCU2_0]     17.235797 s: ETHFW: Init ... !!!</div><div class="line">[MCU2_0]     13.992135 s: Warning: Using 6 MAC address(es) from static pool</div><div class="line">[MCU2_0]     13.992450 s: ETHFW: Shared multicasts (software fanout):</div><div class="line">[MCU2_0]     13.992492 s:   01:00:5e:00:00:01</div><div class="line">[MCU2_0]     13.992538 s:   01:00:5e:00:00:fb</div><div class="line">[MCU2_0]     13.992570 s:   01:00:5e:00:00:fc</div><div class="line">[MCU2_0]     13.992597 s:   33:33:00:00:00:01</div><div class="line">[MCU2_0]     13.992620 s:   33:33:ff:1d:92:c2</div><div class="line">[MCU2_0]     13.992643 s:   01:80:c2:00:00:00</div><div class="line">[MCU2_0]     13.992667 s:   01:80:c2:00:00:03</div><div class="line">[MCU2_0]     13.992691 s: ETHFW: Reserved multicasts:</div><div class="line">[MCU2_0]     13.992714 s:   01:80:c2:00:00:0e</div><div class="line">[MCU2_0]     13.992737 s:   01:1b:19:00:00:00</div><div class="line">[MCU2_0]     13.992951 s: EnetMcm: CPSW_9G on MAIN NAVSS</div><div class="line">[MCU2_0]     14.000069 s: Mdio_open: MDIO manual mode enabled</div><div class="line">[MCU2_0]     14.002454 s: PHY 0 is alive</div><div class="line">[MCU2_0]     14.002749 s: PHY 3 is alive</div><div class="line">[MCU2_0]     14.003372 s: PHY 12 is alive</div><div class="line">[MCU2_0]     14.003615 s: PHY 15 is alive</div><div class="line">[MCU2_0]     14.003714 s: PHY 16 is alive</div><div class="line">[MCU2_0]     14.003813 s: PHY 17 is alive</div><div class="line">[MCU2_0]     14.003911 s: PHY 18 is alive</div><div class="line">[MCU2_0]     14.004006 s: PHY 19 is alive</div><div class="line">[MCU2_0]     14.004295 s: PHY 23 is alive</div><div class="line">[MCU2_0]     14.005237 s: EnetPhy_bindDriver: PHY 12: OUI:080028 Model:23 Ver:01 &lt;-&gt; &#39;dp83867&#39; : OK</div><div class="line">[MCU2_0]     14.005741 s: EnetPhy_bindDriver: PHY 0: OUI:080028 Model:23 Ver:01 &lt;-&gt; &#39;dp83867&#39; : OK</div><div class="line">[MCU2_0]     14.006221 s: EnetPhy_bindDriver: PHY 3: OUI:080028 Model:23 Ver:01 &lt;-&gt; &#39;dp83867&#39; : OK</div><div class="line">[MCU2_0]     14.006714 s: EnetPhy_bindDriver: PHY 15: OUI:080028 Model:23 Ver:01 &lt;-&gt; &#39;dp83867&#39; : OK</div><div class="line">[MCU2_0]     14.007208 s: EnetPhy_bindDriver: PHY 16: OUI:0001c1 Model:27 Ver:00 &lt;-&gt; &#39;vsc8514&#39; : OK</div><div class="line">[MCU2_0]     14.007710 s: EnetPhy_bindDriver: PHY 17: OUI:0001c1 Model:27 Ver:00 &lt;-&gt; &#39;vsc8514&#39; : OK</div><div class="line">[MCU2_0]     14.008201 s: EnetPhy_bindDriver: PHY 18: OUI:0001c1 Model:27 Ver:00 &lt;-&gt; &#39;vsc8514&#39; : OK</div><div class="line">[MCU2_0]     14.008708 s: EnetPhy_bindDriver: PHY 19: OUI:0001c1 Model:27 Ver:00 &lt;-&gt; &#39;vsc8514&#39; : OK</div><div class="line">[MCU2_0]     14.010550 s: </div><div class="line">[MCU2_0] ETHFW Version   : 0.02.00</div><div class="line">[MCU2_0]     14.010597 s: ETHFW Build Date: Jul 28, 2023</div><div class="line">[MCU2_0]     14.010627 s: ETHFW Build Time: 15:06:28</div><div class="line">[MCU2_0]     14.010651 s: ETHFW Commit SHA: a5818372</div><div class="line">[MCU2_0]     14.010721 s: ETHFW: Init ... DONE !!!</div><div class="line">[MCU2_0]     14.010799 s: unibase-1.1.4-jacinto</div><div class="line">[MCU2_0]     14.011476 s: Starting lwIP, local interface IP is dhcp-enabled</div><div class="line">[MCU2_0]     14.018553 s: Host MAC address: 70:ff:76:1d:92:c3</div><div class="line">[MCU2_0]     14.021513 s: ETHFW: Enable gPTP on MAC port 3 (tilld3)</div><div class="line">[MCU2_0]     14.021693 s: ETHFW: TimeSync PTP enabled</div><div class="line">[MCU2_0]     14.021736 s: ETHFW: Remove server Init ... !!!</div><div class="line">[MCU2_0]     14.021906 s: CpswProxyServer: Virtual port configuration:</div><div class="line">[MCU2_0]     14.021959 s:   mpu_1_0 &lt;-&gt; Switch port 0: mpu_1_0_ethswitch-device-0</div><div class="line">[MCU2_0]     14.021997 s:   mcu_2_1 &lt;-&gt; Switch port 1: mcu_2_1_ethswitch-device-1</div><div class="line">[MCU2_0]     14.022031 s:   mpu_1_0 &lt;-&gt; MAC port 1: mpu_1_0_ethmac-device-1</div><div class="line">[MCU2_0]     14.022061 s:   mcu_2_1 &lt;-&gt; MAC port 4: mcu_2_1_ethmac-device-4</div><div class="line">[MCU2_0]     14.022897 s: CpswProxyServer: initialization completed (core: mcu2_0)</div><div class="line">[MCU2_0]     14.022972 s: ETHFW: Remove server Init ... DONE !!!</div><div class="line">[MCU2_0]     14.024153 s: [LWIPIF_LWIP] Enet LLD netif initialized successfully</div><div class="line">[MCU2_0]     14.030854 s: [LWIPIF_LWIP_IC] Interface started successfully</div><div class="line">[MCU2_0]     14.030926 s: [LWIPIF_LWIP_IC] NETIF INIT SUCCESS</div><div class="line">[MCU2_0]     14.037383 s: [LWIPIF_LWIP_IC] Interface started successfully</div><div class="line">[MCU2_0]     14.037455 s: [LWIPIF_LWIP_IC] NETIF INIT SUCCESS</div><div class="line">[MCU2_0]     14.037683 s: Added interface &#39;br4&#39;, IP is 0.0.0.0</div><div class="line">...</div><div class="line">15.010696 s: INF:cbase:cb_rawsock_open:dmaTxChId=-1 dmaRxChId=-1 nTxPkts=0 nRxPkts=0 pktSize=0</div><div class="line">[MCU2_0] INF:gptp:gptpnet_init:Open lldtsync OK!</div><div class="line">[MCU2_0] INF:gptp:000009-625285:domainIndex=0, GM changed old=00:00:00:00:00:00:00:00, new=70:FF:76:FF:FE:1D:92:C3</div><div class="line">[MCU2_0] INF:gptp:set_phase_offsetGM:domainNumber=0, New adjustment(New GM?)</div><div class="line">[MCU2_0] domain=0, offset=0nsec, hw-adjrate=0ppb</div><div class="line">[MCU2_0]         gmsync=true, last_setts64=0nsec</div></div><!-- fragment --><ul>
<li>You should also see the IP addresses assigned to the R5F and A72 cores as shown below. Note that 'br4' IP is the IP address of the R5F core. The addresses shown in your logs may be different.</li>
</ul>
<div class="fragment"><div class="line">[MCU2_0]  SNo.      IP Address          MAC Address   </div><div class="line">[MCU2_0]     20.599222 s: ------    -------------     -----------------</div><div class="line">[MCU2_0]     20.599257 s:   1       10.24.69.43     70:ff:76:1d:92:c2</div><div class="line">[MCU2_0]     20.601977 s: Function:CpswProxyServer_filterAddMacHandlerCb,HostId:0,Handle:a3ac1584,CoreKey:38acb7e6, MacAddress:1:0:5e:0:0:fc, vlanId:0, FlowIdx:173, FlowIdOffset:1</div><div class="line">[MCU2_0]     20.603914 s: Function:CpswProxyServer_filterAddMacHandlerCb,HostId:0,Handle:a3ac1584,CoreKey:38acb7e6, MacAddress:1:0:5e:0:0:fb, vlanId:0, FlowIdx:173, FlowIdOffset:1</div><div class="line">[MCU2_0]     22.010826 s: Added interface &#39;br4&#39;, IP is 10.24.68.137</div><div class="line">[MCU2_0]     25.010796 s: domain=0, offset=0nsec, hw-adjrate=0ppb</div><div class="line">[MCU2_0]         gmsync=true, last_setts64=0nsec</div></div><!-- fragment --><h2><a class="anchor" id="autotoc_md185"></a>
ping test</h2>
<p>Once the EVM is booted along with Linux on A72, the virtual net driver module should be loaded and the eth1 network device corresponding to CPSW9G should be added.</p>
<ol type="1">
<li>Verify this by running ifconfig -a on Linux terminal console of the EVM.</li>
<li>Activate network interface on A72 core as follows: <div class="fragment"><div class="line">sudo ifconfig eth1 up</div></div><!-- fragment --></li>
<li>At this point, data transfer with other devices connected to the network should be possible. Ping the two PCs connected to the switch: <div class="fragment"><div class="line">ping 10.24.69.&lt;pc1&gt;</div><div class="line">ping 10.24.69.&lt;pc2&gt;</div></div><!-- fragment --></li>
<li>Similarly, ping the A72 core from either PC connected to the switch: <div class="fragment"><div class="line">ping 10.24.69.&lt;a72&gt;</div></div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="autotoc_md186"></a>
TCP iperf test</h2>
<p>The CPSW switch is capable of steering network traffic without CPU intervention by classifying it based on its characteristics. This can be demonstrated by running iperf server on Linux running on the A72 core and iperf client on any of the external devices, PC 1 or PC 2.</p>
<ol type="1">
<li>Start iperf server on Linux running on A72. <div class="fragment"><div class="line">iperf -s</div></div><!-- fragment --></li>
<li>Run iperf client on the selected PC. Set test duration with -t option as needed. <div class="fragment"><div class="line">iperf -c 10.24.69.&lt;a72&gt; -t 20 -i 1</div></div><!-- fragment --></li>
</ol>
<p>Refer ETHFW userguide documentation for more details</p>
<h2><a class="anchor" id="autotoc_md187"></a>
gPTP logs for master and slave</h2>
<p>After installing ptp4l on PC2, create a ptp config file (ptp_config.cfg) for setting different ptp params while testing gPTP. The contents of the file can be as follows:</p>
<div class="fragment"><div class="line">[global]</div><div class="line">gmCapable       1</div><div class="line">priority1       238</div><div class="line">priority2       248</div><div class="line">logAnnounceInterval 0</div><div class="line">logSyncInterval     -3</div><div class="line">syncReceiptTimeout  3</div><div class="line">neighborPropDelayThresh 800</div><div class="line">min_neighbor_prop_delay -20000000</div><div class="line">assume_two_step     1</div><div class="line">path_trace_enabled  1</div><div class="line">follow_up_info      1</div><div class="line">transportSpecific   0x1</div><div class="line">ptp_dst_mac     01:80:C2:00:00:0E</div><div class="line">network_transport   L2</div><div class="line">delay_mechanism     P2P</div></div><!-- fragment --><p>By changing priority1 to 220 or 255 you can force your PC2 to run either as master or slave. Run the following command on PC2 for starting ptp4l: </p><div class="fragment"><div class="line">sudo ptp4l -i &lt;net-interface&gt; -m -l 6 -q -f ~/ptp_config.cfg</div></div><!-- fragment --><p>If your EVM is running as master, the logs are as follows:</p>
<div class="fragment"><div class="line">[MCU2_0]     45.213639 s: domain=0, offset=0nsec, hw-adjrate=0ppb</div><div class="line">[MCU2_0]         gmsync=true, last_setts64=0nsec</div><div class="line">[MCU2_0]     55.213637 s: domain=0, offset=0nsec, hw-adjrate=0ppb</div><div class="line">[MCU2_0]         gmsync=true, last_setts64=0nsec</div><div class="line">[MCU2_0]     65.213641 s: domain=0, offset=0nsec, hw-adjrate=0ppb</div><div class="line">[MCU2_0]         gmsync=true, last_setts64=0nsec</div><div class="line">[MCU2_0]     75.213786 s: domain=0, offset=0nsec, hw-adjrate=0ppb</div><div class="line">[MCU2_0]         gmsync=true, last_setts64=0nsec</div></div><!-- fragment --><p>If your EVM is running as slave, your logs are as follows:</p>
<div class="fragment"><div class="line">[MCU2_0]     39.115644 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -4571ppb, GMdiff=239nsec</div><div class="line">[MCU2_0]     40.115645 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -4471ppb, GMdiff=620nsec</div><div class="line">[MCU2_0]     41.115647 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -4333ppb, GMdiff=1001nsec</div><div class="line">[MCU2_0]     42.115646 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -4159ppb, GMdiff=1372nsec</div><div class="line">[MCU2_0]     43.115642 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -3948ppb, GMdiff=1746nsec</div><div class="line">[MCU2_0]     44.115646 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -3737ppb, GMdiff=1930nsec</div><div class="line">[MCU2_0]     45.115642 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -3489ppb, GMdiff=2210nsec</div><div class="line">[MCU2_0] domain=0, offset=0nsec, hw-adjrate=-3489ppb</div><div class="line">[MCU2_0]         gmsync=true, last_setts64=0nsec</div><div class="line">[MCU2_0]     46.115644 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -3252ppb, GMdiff=2296nsec</div><div class="line">[MCU2_0]     47.115647 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -3023ppb, GMdiff=2293nsec</div><div class="line">[MCU2_0]     48.115642 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -2797ppb, GMdiff=2275nsec</div><div class="line">[MCU2_0]     49.115648 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -2623ppb, GMdiff=2008nsec</div><div class="line">[MCU2_0]     50.115641 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -2455ppb, GMdiff=1846nsec</div><div class="line">[MCU2_0]     51.115647 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -2319ppb, GMdiff=1601nsec</div><div class="line">[MCU2_0]     52.115643 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -2210ppb, GMdiff=1348nsec</div><div class="line">[MCU2_0]     53.115645 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -2158ppb, GMdiff=930nsec</div><div class="line">[MCU2_0]     54.115638 s: IFV:gptp:domainNumber=0, clock_master_sync_receive:the master clock rate to -2124ppb, GMdiff=630nsec</div><div class="line">[MCU2_0]     55.115649 s: domain=0, offset=0nsec, hw-adjrate=-2124ppb</div><div class="line">[MCU2_0]         gmsync=true, last_setts64=0nsec</div></div><!-- fragment --><h2><a class="anchor" id="autotoc_md188"></a>
For QNX after running the vision_apps_init.sh script bring up the CPSW ethernet virtual driver as below,</h2>
<div class="fragment"><div class="line">slog2info -c</div><div class="line">slog2info -w &amp;</div><div class="line">io-pkt-v6-hc -d cpsw9g verbose=0x0</div><div class="line">dhclient -nw an0</div><div class="line">ifconfig -v</div></div><!-- fragment --><h1><a class="anchor" id="autotoc_md189"></a>
Known Issues</h1>
<ul>
<li>The GESI card uses the same connector pins as infotainment card so only one of them can be connected</li>
<li>With EthFw enabled by default, if infotainment board is connected it results in HDMI display corruption. eDP to HDMI adaptors also cannot be used with EthFw enabled. To workaround this issue disable EthFw if required or switch display to eDP.</li>
</ul>
<h1><a class="anchor" id="ETHFW_HOWTO_DISABLE"></a>
How to disable ETHFW</h1>
<ul>
<li>In file vision_apps_build_flags.mak, set BUILD_ENABLE_ETHFW?=no</li>
<li>Run "make vision_apps_scrub" prior to re-building</li>
<li>Note: Ethernet Firmware must be disabled in order to use the HDMI display</li>
</ul>
<h2><a class="anchor" id="autotoc_md190"></a>
How to disable gPTP in ETHFW</h2>
<ul>
<li>In file vision_apps_build_flags.mak, set ETHFW_GPTP_SUPPORT?=no</li>
<li>Run "make vision_apps_scrub" prior to re-building</li>
<li>Note: You can't run gPTP if ETHFW is disabled </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
